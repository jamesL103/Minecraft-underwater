id: SHALLOWS
type: BIOME

extends: [BASE, PALETTE_BASIC_OCEAN, ARCH_CARVING]

vanilla: underwater:warm_ocean

features:
  fillTerrain:
    - PLACE_SAND
  flora:
    - SEAGRASS_FEATURE

palette:
  - SANDSTONE: 319

vars: &variables
  base: 50 #base y level
  groundHeight: 5 #block height of ground variation
  hillHeight: 7

terrain:
  sampler:
    type: EXPRESSION
    dimensions: 3
    variables: *variables
    expression: -y + base

  sampler-2d:
    type: EXPRESSION
    dimensions: 2
    variables: *variables
    expression:
      (ground(x, z) + 1)/2 * groundHeight 
      + (hills(x,z) + 1)/2 * hillHeight * ((hillHeightVar(x,z)/4)+0.75)
      + (piles(x,z) + 1)
    samplers:
      ground:
        type: FBM
        dimensions: 2
        sampler:
          type: OPEN_SIMPLEX_2
          frequency: 0.008
      hills:
        type: DOMAIN_WARP
        dimensions: 2
        amplitude: 6
        warp:
          type: OPEN_SIMPLEX_2
          frequency: 0.01
        sampler:
          type: DOMAIN_WARP
          amplitude: 6
          warp:
            type: OPEN_SIMPLEX_2
            frequency: 0.01
          sampler:
            type: OPEN_SIMPLEX_2
            frequency: 0.05
      hillHeightVar:
        type: FBM
        dimensions: 2
        octaves: 2
        sampler:
          type: OPEN_SIMPLEX_2
          frequency: 0.02
      piles:
        type: FBM
        dimensions: 2
        octaves: 4
        gain: 0.5
        lacunarity: 2
        sampler:
          type: OPEN_SIMPLEX_2
          frequency: 0.03

